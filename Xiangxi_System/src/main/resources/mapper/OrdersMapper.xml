<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qjn.xiangxi_system.mapper.OrdersMapper">

    <resultMap id="BaseResultMap" type="com.qjn.xiangxi_system.pojo.Orders">
            <id property="id" column="id" jdbcType="INTEGER"/>
            <result property="userid" column="userId" jdbcType="INTEGER"/>
            <result property="travelid" column="travelId" jdbcType="INTEGER"/>
            <result property="orderdate" column="orderDate" jdbcType="DATE"/>
            <result property="status" column="status" jdbcType="VARCHAR"/>
            <result property="totalprice" column="totalPrice" jdbcType="DECIMAL"/>
            <result property="quantity" column="quantity" jdbcType="INTEGER"/>
    </resultMap>

    <sql id="Base_Column_List">
        id,userId,travelId,orderDate,
        status,totalPrice,quantity
    </sql>
    <select id="getAllOrders" resultType="com.qjn.xiangxi_system.pojo.vo.OrdersVO">
        select o.*,u.username,t.title,t.cover from orders o, user u, travels t where o.userid = u.id and o.travelid = t.id
    </select>
    <select id="getUserOrders" resultType="com.qjn.xiangxi_system.pojo.vo.OrdersVO">
        select o.*,u.username,t.title,t.cover from orders o, user u, travels t where o.userid = u.id and o.travelid = t.id and o.userid = #{userid}
    </select>
</mapper>
